@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
@* <meta http-equiv="refresh" content="2" /> *@
<div class="text-center">
    @* <p id="cpu">@Model.getCPU()%</p> *@
    <p id="cpu">@Model.getCPU()%</p>
    <p id="date">@DateTime.Now.ToString()</p>

    <button type="button" onclick="document.getElementById('cpu').innerHTML=@Model.cpuUsage">Click Me!</button>
    <button type="button" onclick="document.getElementById('cpu').innerHTML=@Model.getCPU()">Click Me!</button>

    <div class="content show">
        <h1><i class="fas fa-microchip"></i> CPU</h1>
        <div class="progress-bar">
            <div class="progress" id="cpu-progress"></div>
        </div>

        <ul>
            <li><strong>CPU Usage: </strong><span id="cpu-usage"></span></li>
            <li><strong>CPU Free: </strong><span id="cpu-free"></span></li>
        </ul>
        <div id="cpu-model"></div>
    </div>

    <table id="myTable" class="table table-sm table-striped">
        <thead class="thead-dark">
            <tr class="d-flex">
                <th>Id</th>
                <th>Process Name</th>
                <th>Physical Memory</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var processInformation in Model.Processes)
            {
                <tr class="d-flex">
                    <td>@processInformation.Id</td>
                    <td>@try
                        {
                            @processInformation.MainModule.ModuleName
                        }
                        catch
                        {
                            @processInformation.ProcessName
                        }
                    </td>
                    <td>@processInformation.WorkingSet64</td>
                </tr>
            }
        </tbody>
    </table>
</div>
